{"version":3,"file":"racoon.esm.js","sources":["../lib/utils/is.js","../lib/utils/constants.js","../lib/utils/validate-error.js","../lib/restricts/base.js","../lib/restricts/number-type.js","../lib/restricts/number-required.js","../lib/restricts/enum.js","../lib/restricts/number-max.js","../lib/restricts/number-min.js","../lib/restricts/number-int.js","../lib/restricts/required.js","../lib/restricts/custom.js","../lib/type/base.js","../lib/type/number.js","../lib/restricts/string-type.js","../lib/restricts/length-max.js","../lib/restricts/length-min.js","../lib/restricts/string-pattern.js","../lib/type/string.js","../lib/restricts/boolean-type.js","../lib/type/boolean.js","../lib/restricts/any-type.js","../lib/restricts/any-required.js","../lib/type/any.js","../lib/restricts/object-type.js","../lib/type/object.js","../lib/restricts/array-type.js","../lib/type/arrary.js","../lib/index.js"],"sourcesContent":["export const toString = Object.prototype.toString;\n\nexport function getType(val) {\n  const str = toString.call(val);\n  return str.substring(8, str.length - 1);\n}\n\nexport function isUndefined(val) {\n  return getType(val) === 'Undefined';\n}\n\nexport function isNull(val) {\n  return val === null;\n}\n\nexport function isNaN(val) {\n  return val !== val;\n}\n\nexport function isNotRequired(val) {\n  return isUndefined(val) || isNull(val);\n}\n\nexport function isFalsy(val) {\n  return !val;\n}\n\nexport function isEmpty(val) {\n  const type = getType(val);\n  if (type === 'Object') {\n    return Object.keys(val).length === 0;\n  }\n  if (type === 'Array' || type === 'Arguments') {\n    return val.length === 0;\n  }\n  return isFalsy(val);\n}\n\nexport function isEmptyObject(val) {\n  if (getType(val) === 'Object') {\n    return Object.keys(val).length === 0;\n  }\n  return false;\n}\n\nexport function isEmptyArray(val) {\n  if (getType(val) === 'Array') {\n    return val.length === 0;\n  }\n  return false;\n}\n\nexport function isString(val) {\n  return typeof val === 'string';\n}\n\nexport function isNumber(val) {\n  return typeof val === 'number';\n}\n\nexport function isInt(val) {\n  if (isNumber(val) === false) {\n    return false;\n  }\n  return Math.floor(val) === val;\n}\n\nexport function isInfinity(val) {\n  return isNumber(val) && isNaN(val) === false && Number.isFinite(val) === false;\n}\n\nexport function isBoolean(val) {\n  return typeof val === 'boolean';\n}\n\nexport function isRegExp(val) {\n  return val instanceof RegExp;\n}\n\nexport function isObject(val) {\n  return getType(val) === 'Object';\n}\n\nexport function isArray(val) {\n  return Array.isArray(val);\n}\n\nexport function isFunction(val) {\n  return getType(val) === 'Function';\n}\n\nexport function getKeyStr(keyChain) {\n  const propReg = /^[_$a-z][_$a-z\\d]*$/i;\n  let result = '';\n  for (let i = 0; i < keyChain.length; i += 1) {\n    const { type, key } = keyChain[i];\n    if (type === 'prop' && propReg.test(key)) {\n      if (result) {\n        result += `.${key}`;\n      } else {\n        result += key;\n      }\n    } else if (type === 'prop') {\n      result += `['${key}']`;\n    } else if (type === 'index') {\n      result += `[${key}]`;\n    }\n  }\n  return result;\n}\n","export const TYPE = {\n  number: 'number',\n  string: 'string',\n  boolean: 'boolean',\n  object: 'object',\n  array: 'array',\n  any: 'any'\n};\n","export default class ValidateError extends Error {\n  noKeyChain = false;\n  final = false;\n\n  constructor(message, options = {}) {\n    super(message);\n    const {\n      noKeyChain = false,\n      final = false,\n      custom = false\n    } = options;\n    this.noKeyChain = noKeyChain;\n    this.final = final;\n    this.custom = custom;\n  }\n\n  toString() {\n    return `Validate${super.toString()}`;\n  }\n}\n","import { isFunction, isString } from '../utils/is';\nimport ValidateError from '../utils/validate-error';\n\nexport default class RestrictBase {\n  errorConfig = {\n    message: '',\n    ctx: null\n  }\n\n  setErrorMessage(message, ctx) {\n    this.errorConfig = {\n      message,\n      ctx,\n    };\n  }\n\n  getError(originMessage) {\n    const { message, ctx } = this.errorConfig;\n    if (isFunction(message)) {\n      return new ValidateError(\n        message.call(ctx, originMessage),\n        { noKeyChain: true, custom: true }\n      );\n    }\n    if (isString(message) && message) {\n      return new ValidateError(message, { noKeyChain: true, custom: true });\n    }\n    return new ValidateError(originMessage);\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isNaN,\n  isNumber,\n  isUndefined,\n  isNull,\n  isInfinity\n} from '../utils/is';\n\nexport default class RestrictNumberType extends RestrictBase {\n  isAllowNaN = false;\n  isAllowInfinity = false;\n\n  enableAllowNaN() {\n    this.isAllowNaN = true;\n  }\n\n  enableAllowInfinity() {\n    this.isAllowInfinity = true;\n  }\n\n  validate(val) {\n    const { isAllowNaN, isAllowInfinity } = this;\n    if (isNaN(val) && isAllowNaN === false) {\n      throw this.getError('value is not allowed to be NaN');\n    }\n    if (isInfinity(val) && isAllowInfinity === false) {\n      throw this.getError('value is not allowed to be Infinity');\n    }\n    if (isNumber(val) || isUndefined(val) || isNull(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof number');\n  }\n}\n","import RestrictBase from './base';\nimport { isNaN, isNotRequired } from '../utils/is';\n\nexport default class RestrictRequired extends RestrictBase {\n  validate(val) {\n    if (isNotRequired(val)) {\n      throw this.getError('value is required and should not be undefined/null');\n    }\n    if (isNaN(val)) {\n      throw this.getError('value is required and should not be NaN');\n    }\n    return true;\n  }\n}\n","import RestrictBase from './base';\n\nexport default class RestrictEnum extends RestrictBase {\n  enumValues = null;\n\n  constructor(...values) {\n    super();\n    if (values.length === 0) {\n      throw new RangeError('enum arguments can not be empty');\n    }\n    this.enumValues = values;\n  }\n\n  get valueStr() {\n    return JSON.stringify(this.enumValues);\n  }\n\n  validate(val) {\n    if (this.enumValues.indexOf(val) > -1) {\n      return true;\n    }\n    throw this.getError(`value should be one of ${this.valueStr}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictNumberMax extends RestrictBase {\n  constructor(max, closed) {\n    super();\n    if (isNumber(max) === false) {\n      throw new TypeError('`max` should be typeof number');\n    }\n    this.max = max;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed === false) {\n      if (val < this.max) {\n        return true;\n      }\n      throw this.getError(`value should less than ${this.max}`);\n    }\n\n    if (val <= this.max) {\n      return true;\n    }\n    throw this.getError(`value should less than or equal ${this.max}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictNumberMin extends RestrictBase {\n  constructor(min, closed) {\n    super();\n    if (isNumber(min) === false) {\n      throw new TypeError('`min` should be a number');\n    }\n\n    this.min = min;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed === false) {\n      if (val > this.min) {\n        return true;\n      }\n      throw this.getError(`value should greater than ${this.min}`);\n    }\n\n    if (val >= this.min) {\n      return true;\n    }\n    throw this.getError(`value should greater than or equal ${this.min}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isInt } from '../utils/is';\n\nexport default class RestrictNumberInt extends RestrictBase {\n  validate(val) {\n    if (isInt(val)) {\n      return true;\n    }\n    throw this.getError('value should be an int');\n  }\n}\n","import RestrictBase from './base';\nimport { isEmpty, isNotRequired } from '../utils/is';\n\nexport default class RestrictRequired extends RestrictBase {\n  strict = false;\n\n  constructor(strict) {\n    super();\n    this.strict = strict === true;\n  }\n\n  validate(val) {\n    const { strict } = this;\n    if (strict === true) {\n      if (isEmpty(val)) {\n        throw this.getError('value is required and should not be empty');\n      }\n      return true;\n    }\n    if (isNotRequired(val)) {\n      throw this.getError('value is required and should not be undefined/null');\n    }\n    return true;\n  }\n}\n","import { isFunction, isString } from '../utils/is';\nimport RestrictBase from './base';\n\nexport default class RestrictCustom extends RestrictBase {\n  constructor(restrictFn, ctx) {\n    super();\n    if (isFunction(restrictFn) === false) {\n      throw new TypeError('`custom` must receive a Function parameter');\n    }\n    this.restrictFn = restrictFn;\n    this.ctx = ctx;\n  }\n\n  validate(val) {\n    try {\n      const result = this.restrictFn.call(this.ctx, val);\n      if (isString(result) && result) {\n        throw this.getError(result);\n      }\n    } catch (error) {\n      throw this.getError(error.message);\n    }\n    return true;\n  }\n}\n","import {\n  isEmpty,\n  isNotRequired,\n  isNaN,\n  isString,\n  isFunction\n} from '../utils/is';\nimport ValidateError from '../utils/validate-error';\nimport RestrictRequired from '../restricts/required';\nimport RestrictCustom from '../restricts/custom';\n\nexport default class TypeBase {\n  restricts = [];\n  typeRestrict = null;\n  requiredRestrict = null;\n  currentRestrict = null;\n  defaultConfig = {\n    enable: false,\n    strict: false,\n    value: undefined\n  };\n  formatterConfig = {\n    ctx: undefined,\n    formatter: val => val\n  };\n  errorForAllConfig = {\n    enable: false,\n    ctx: undefined,\n    message: ''\n  };\n\n  required(strict = false) {\n    this.requiredRestrict = new RestrictRequired(strict);\n    this.currentRestrict = this.requiredRestrict;\n    return this;\n  }\n\n  custom(restrictFn, ctx) {\n    const restrict = new RestrictCustom(restrictFn, ctx);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  error(message, ctx) {\n    this.currentRestrict.setErrorMessage(message, ctx);\n    return this;\n  }\n\n  errorForAll(message, ctx) {\n    this.errorForAllConfig = {\n      enable: true,\n      message,\n      ctx\n    };\n    return this;\n  }\n\n  default(...args) {\n    if (args.length === 0) {\n      throw new Error('`default` args can not be empty');\n    }\n    const [value, strict, ctx] = args;\n    Object.assign(this.defaultConfig, {\n      enable: true,\n      strict: strict === true,\n      value,\n      ctx\n    });\n    return this;\n  }\n\n  format(formatter, ctx) {\n    if (typeof formatter !== 'function') {\n      throw new TypeError('`format` argument should be a function');\n    }\n    this.formatterConfig = {\n      ctx,\n      formatter\n    };\n    return this;\n  }\n\n  calcDefaultValue(val) {\n    const { value, ctx } = this.defaultConfig;\n    if (typeof value === 'function') {\n      return value.call(ctx, val);\n    }\n    return value;\n  }\n\n  getReturnValueWithStrict(val) {\n    const { enable, strict } = this.defaultConfig;\n    const { formatter, ctx } = this.formatterConfig;\n    if (enable && (isNotRequired(val) || isNaN(val))) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    if (enable && isEmpty(val) && strict) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    return formatter.call(ctx, val);\n  }\n\n  getReturnValue(val) {\n    const { formatter, ctx } = this.formatterConfig;\n    if (this.defaultConfig.enable && (isNotRequired(val) || isNaN(val))) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    return formatter.call(ctx, val);\n  }\n\n  getErrorForAll(originalMessage) {\n    const {\n      enable,\n      ctx,\n      message\n    } = this.errorForAllConfig;\n    if (enable !== true) {\n      return null;\n    }\n    if (isString(message) && message) {\n      return new ValidateError(message);\n    }\n    if (isFunction(message)) {\n      return new ValidateError(\n        message.call(ctx, originalMessage)\n      );\n    }\n    return null;\n  }\n\n  checkType(val) {\n    return this.typeRestrict.validate(val);\n  }\n\n  checkRequired(val) {\n    if (!this.requiredRestrict) {\n      return true;\n    }\n\n    return this.requiredRestrict.validate(val);\n  }\n\n  checkRestricts(val) {\n    for (let i = 0; i < this.restricts.length; i += 1) {\n      this.restricts[i].validate(val);\n    }\n    return true;\n  }\n\n  validate(val) {\n    if (!this.requiredRestrict && isNotRequired(val)) {\n      return this.getReturnValue(val);\n    }\n    try {\n      this.checkType(val);\n      this.checkRequired(val);\n      this.checkRestricts(val);\n\n      return this.getReturnValue(val);\n    } catch (error) {\n      if (error.custom === true) {\n        throw error;\n      }\n      const errorForAll = this.getErrorForAll(error.message);\n      if (errorForAll) {\n        throw errorForAll;\n      }\n      throw error;\n    }\n  }\n\n  validateSilent(val) {\n    try {\n      return {\n        value: this.validate(val)\n      };\n    } catch (error) {\n      return {\n        error,\n        value: val\n      };\n    }\n  }\n}\n","import {\n  isNaN,\n  isNotRequired\n} from '../utils/is';\nimport { TYPE } from '../utils/constants';\nimport RestrictNumberType from '../restricts/number-type';\nimport RestrictNumberRequired from '../restricts/number-required';\nimport RestrictEnum from '../restricts/enum';\nimport RestrictNumberMax from '../restricts/number-max';\nimport RestrictNumberMin from '../restricts/number-min';\nimport RestrictNumberInt from '../restricts/number-int';\nimport TypeBase from './base';\n\nconst NUMBER_REG = /^[+-]?\\d*\\.?\\d*$/;\n\nexport default class TypeNumber extends TypeBase {\n  type = TYPE.number;\n  isAllowString = false;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictNumberType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  getReturnValue(val) {\n    const { enable } = this.defaultConfig;\n    const { formatter, ctx } = this.formatterConfig;\n    if (\n      enable\n      && (isNotRequired(val) || isNaN(val))\n    ) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    return formatter.call(ctx, val);\n  }\n\n  default(...args) {\n    if (args.length === 0) {\n      throw new Error('`default` args can not be empty');\n    }\n    const [value, ctx] = args;\n    Object.assign(this.defaultConfig, {\n      enable: true,\n      strict: false,\n      value,\n      ctx\n    });\n    return this;\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  required() {\n    this.requiredRestrict = new RestrictNumberRequired();\n    this.currentRestrict = this.requiredRestrict;\n    return this;\n  }\n\n  allowNaN() {\n    this.typeRestrict.enableAllowNaN();\n    return this;\n  }\n\n  allowInfinity() {\n    this.typeRestrict.enableAllowInfinity();\n    return this;\n  }\n\n  allowString() {\n    this.isAllowString = true;\n    return this;\n  }\n\n  min(min, closed = true) {\n    const restrict = new RestrictNumberMin(min, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  max(max, closed = true) {\n    const restrict = new RestrictNumberMax(max, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  int() {\n    const restrict = new RestrictNumberInt();\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  validate(val) {\n    if (this.isAllowString && NUMBER_REG.test(val)) {\n      val = Number(val);\n    }\n    return super.validate(val);\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isString,\n  isNotRequired\n} from '../utils/is';\n\nexport default class RestrictStringType extends RestrictBase {\n  validate(val) {\n    if (isString(val) || isNotRequired(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof string');\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictLengthMax extends RestrictBase {\n  constructor(max, closed) {\n    super();\n    if (isNumber(max) === false) {\n      throw new TypeError('`max` should be typeof number');\n    }\n\n    this.max = max;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed) {\n      if (val.length <= this.max) {\n        return true;\n      }\n      throw this.getError(`value length should less than or equal ${this.max}`);\n    }\n    if (val.length < this.max) {\n      return true;\n    }\n    throw this.getError(`value length should less than ${this.max}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictLengthMin extends RestrictBase {\n  constructor(min, closed) {\n    super();\n    if (isNumber(min) === false) {\n      throw new TypeError('`min` should be a number');\n    }\n\n    this.min = min;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed) {\n      if (val.length >= this.min) {\n        return true;\n      }\n      throw this.getError(`value length should greater than or equal ${this.min}`);\n    }\n    if (val.length > this.min) {\n      return true;\n    }\n    throw this.getError(`value length should greater than ${this.min}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isRegExp } from '../utils/is';\n\nexport default class RestrictStringPattern extends RestrictBase {\n  constructor(pattern) {\n    super();\n    if (isRegExp(pattern) === false) {\n      throw new TypeError('pattern should be a RegExp');\n    }\n    this.pattern = pattern;\n  }\n\n  validate(val) {\n    if (this.pattern.test(val)) {\n      return true;\n    }\n    throw this.getError(`value should match pattern ${this.pattern.toString()}`);\n  }\n}\n","import { TYPE } from '../utils/constants';\nimport RestrictStringType from '../restricts/string-type';\nimport RestrictEnum from '../restricts/enum';\nimport RestrictLengthMax from '../restricts/length-max';\nimport RestrictLengthMin from '../restricts/length-min';\nimport RestrictStringPattern from '../restricts/string-pattern';\nimport TypeBase from './base';\n\nexport default class TypeString extends TypeBase {\n  type = TYPE.string;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictStringType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  max(max, closed = true) {\n    const restrict = new RestrictLengthMax(max, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  min(min, closed = true) {\n    const restrict = new RestrictLengthMin(min, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  pattern(pattern) {\n    const restrict = new RestrictStringPattern(pattern);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isBoolean,\n  isNotRequired\n} from '../utils/is';\n\nexport default class RestrictBooleanType extends RestrictBase {\n  validate(val) {\n    if (isBoolean(val) || isNotRequired(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof boolean');\n  }\n}\n","import { TYPE } from '../utils/constants';\nimport RestrictBooleanType from '../restricts/boolean-type';\nimport RestrictEnum from '../restricts/enum';\nimport TypeBase from './base';\n\nexport default class TypeBoolean extends TypeBase {\n  type = TYPE;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictBooleanType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  default(...args) {\n    if (args.length === 0) {\n      throw new Error('`default` args can not be empty');\n    }\n    const [value, ctx] = args;\n    Object.assign(this.defaultConfig, {\n      enable: true,\n      strict: false,\n      value,\n      ctx\n    });\n    return this;\n  }\n}\n","import RestrictBase from './base';\n\nexport default class RestrictAnyType extends RestrictBase {\n  validate(val) {\n    return true;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isNaN,\n  isNotRequired,\n  isEmptyObject,\n  isEmptyArray\n} from '../utils/is';\n\nexport default class RestrictRequired extends RestrictBase {\n  strict = false;\n\n  constructor(strict) {\n    super();\n    this.strict = strict === true;\n  }\n\n  validate(val) {\n    const { strict } = this;\n    if (strict === true) {\n      if (\n        isNotRequired(val)\n        || val === ''\n        || isNaN(val)\n        || isEmptyObject(val)\n        || isEmptyArray(val)\n      ) {\n        throw this.getError('value is required and should not be empty');\n      }\n      return true;\n    }\n    if (isNotRequired(val) || isNaN(val)) {\n      throw this.getError('value is required and should not be undefined/null/NaN');\n    }\n    return true;\n  }\n}\n","import { TYPE } from '../utils/constants';\nimport RestrictAnyType from '../restricts/any-type';\nimport RestrictAnyRequired from '../restricts/any-required';\nimport RestrictEnum from '../restricts/enum';\nimport TypeBase from './base';\n\nexport default class TypeAny extends TypeBase {\n  type = TYPE.any;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictAnyType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  required(strict = false) {\n    this.requiredRestrict = new RestrictAnyRequired(strict);\n    this.currentRestrict = this.requiredRestrict;\n    return this;\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isObject,\n  isUndefined,\n  isNull\n} from '../utils/is';\n\nexport default class RestrictObjectType extends RestrictBase {\n  validate(val) {\n    if (isObject(val) || isUndefined(val) || isNull(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof object');\n  }\n}\n","import {\n  isObject,\n  isNotRequired,\n  getKeyStr,\n} from '../utils/is';\nimport { TYPE } from '../utils/constants';\nimport RestrictObjectType from '../restricts/object-type';\nimport ValidateError from '../utils/validate-error';\nimport TypeBase from './base';\n\nexport default class TypeObject extends TypeBase {\n  type = TYPE.object;\n  config = null;\n  isStripUnknown = false;\n  isAllowUnknown = false;\n\n  constructor(config) {\n    super();\n    this.typeRestrict = new RestrictObjectType();\n    this.currentRestrict = this.typeRestrict;\n    if (isObject(config)) {\n      const pureConfig = Object.create(null);\n      Object.keys(config).forEach(key => {\n        if (config[key] instanceof TypeBase) {\n          pureConfig[key] = config[key];\n        }\n      });\n      this.config = pureConfig;\n    }\n  }\n\n  get keys() {\n    return Object.keys(this.config);\n  }\n\n  hasKey(key) {\n    return this.keys.includes(key);\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  stripUnknown() {\n    this.isStripUnknown = true;\n    return this;\n  }\n\n  allowUnknown() {\n    this.isAllowUnknown = true;\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {Object} obj - object to validate\n   * @param {Array} [keyChain=[]] - object props chain\n   * @returns {Object} - result of validate\n   */\n  validateRecurse(obj, keyChain) {\n    keyChain = keyChain || [];\n\n    if (this.config === null) {\n      return obj;\n    }\n\n    const result = {};\n    let keys;\n    if (this.isStripUnknown === true) {\n      keys = this.keys;\n    } else {\n      keys = Object.keys(obj);\n    }\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      const schema = this.config[key];\n      if (this.hasKey(key) === false) {\n        if (this.isAllowUnknown === true) {\n          result[key] = obj[key];\n          continue;\n        }\n        throw new ValidateError(`the key \\`${key}\\` is not allowed`);\n      }\n\n      try {\n        if (schema.type === TYPE.object || schema.type === TYPE.array) {\n          result[key] = schema.validateRecurse(\n            obj[key],\n            [\n              ...keyChain,\n              {\n                key,\n                type: 'prop'\n              }\n            ]\n          );\n        } else {\n          result[key] = schema.validate(obj[key]);\n        }\n      } catch (error) {\n        if (error.final) {\n          throw error;\n        }\n        if (error.noKeyChain) {\n          throw new ValidateError(error.message, { final: true });\n        }\n        let keyChainStr = getKeyStr([...keyChain, { type: 'prop', key }]);\n        keyChainStr = `\"${keyChainStr}\": `;\n        throw new ValidateError(`${keyChainStr}${error.message}`, { final: true });\n      }\n    }\n    return result;\n  }\n\n  validate(obj) {\n    if (!this.requiredRestrict && isNotRequired(obj)) {\n      return this.getReturnValue(obj);\n    }\n\n    try {\n      this.checkRequired(obj);\n      this.checkType(obj);\n      this.checkRestricts(obj);\n\n      return this.getReturnValue(\n        this.validateRecurse(obj)\n      );\n    } catch (error) {\n      if (error.custom === true) {\n        throw error;\n      }\n      const errorForAll = this.getErrorForAll(error.message);\n      if (errorForAll) {\n        throw errorForAll;\n      }\n      throw error;\n    }\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isArray,\n  isUndefined,\n  isNull\n} from '../utils/is';\n\nexport default class RestrictArrayType extends RestrictBase {\n  validate(val) {\n    if (isArray(val) || isUndefined(val) || isNull(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof array');\n  }\n}\n","import {\n  isNotRequired,\n  getKeyStr,\n} from '../utils/is';\nimport ValidateError from '../utils/validate-error';\nimport { TYPE } from '../utils/constants';\nimport RestrictArrayType from '../restricts/array-type';\nimport RestrictLengthMin from '../restricts/length-min';\nimport RestrictLengthMax from '../restricts/length-max';\nimport TypeBase from './base';\n\nexport default class TypeArray extends TypeBase {\n  type = TYPE.array;\n  itemSchema = null;\n\n  constructor(itemSchema) {\n    super();\n    this.typeRestrict = new RestrictArrayType();\n    this.currentRestrict = this.typeRestrict;\n    if (itemSchema instanceof TypeBase) {\n      this.itemSchema = itemSchema;\n    }\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  min(min, closed = true) {\n    const restrict = new RestrictLengthMin(min, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  max(max, closed = true) {\n    const restrict = new RestrictLengthMax(max, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {Array} array - array to validate\n   * @param {Array} [keyChain=[]] - props key chain\n   * @returns {Array} - result of validate\n   */\n  validateRecurse(array, keyChain) {\n    keyChain = keyChain || [];\n    const { itemSchema } = this;\n\n    if (itemSchema) {\n      const result = [];\n      for (let i = 0; i < array.length; i += 1) {\n        try {\n          if (itemSchema.type === TYPE.array || itemSchema.type === TYPE.object) {\n            result.push(\n              itemSchema.validateRecurse(array[i], [...keyChain, { type: 'index', key: i }])\n            );\n          } else {\n            result.push(\n              itemSchema.validate(array[i])\n            );\n          }\n        } catch (error) {\n          if (error.final) {\n            throw error;\n          }\n          if (error.noKeyChain) {\n            throw new ValidateError(error.message, { final: true });\n          }\n          let keyChainStr = getKeyStr([...keyChain, { type: 'index', key: i }]);\n          keyChainStr = `\"${keyChainStr}\": `;\n          throw new ValidateError(`${keyChainStr}${error.message}`, { final: true });\n        }\n      }\n      return result;\n    }\n    return array;\n  }\n\n  validate(array) {\n    if (!this.requiredRestrict && isNotRequired(array)) {\n      return this.getReturnValue(array);\n    }\n\n    try {\n      this.checkRequired(array);\n      this.checkType(array);\n      this.checkRestricts(array);\n\n      return this.getReturnValue(\n        this.validateRecurse(array)\n      );\n    } catch (error) {\n      if (error.custom === true) {\n        throw error;\n      }\n      const errorForAll = this.getErrorForAll(error.message);\n      if (errorForAll) {\n        throw errorForAll;\n      }\n      throw error;\n    }\n  }\n}\n","import {\n  TypeNumber,\n  TypeString,\n  TypeBoolean,\n  TypeAny,\n  TypeObject,\n  TypeArray\n} from './type';\n\nexport function number() {\n  return new TypeNumber();\n}\n\nexport function string() {\n  return new TypeString();\n}\n\nexport function boolean() {\n  return new TypeBoolean();\n}\n\nexport function any() {\n  return new TypeAny();\n}\n\nexport function object(config) {\n  return new TypeObject(config);\n}\n\nexport function array(itemSchema) {\n  return new TypeArray(itemSchema);\n}\n\nexport default {\n  number,\n  string,\n  boolean,\n  any,\n  object,\n  array\n};\n"],"names":["toString","Object","prototype","getType","val","str","call","substring","length","isUndefined","isNull","isNaN","isNotRequired","isFalsy","isEmpty","type","keys","isEmptyObject","isEmptyArray","isString","isNumber","isInt","Math","floor","isInfinity","Number","isFinite","isBoolean","isRegExp","RegExp","isObject","isArray","Array","isFunction","getKeyStr","keyChain","propReg","result","i","key","test","TYPE","number","string","object","array","any","ValidateError","message","options","noKeyChain","final","custom","Error","RestrictBase","errorConfig","ctx","originMessage","RestrictNumberType","isAllowNaN","isAllowInfinity","getError","RestrictRequired","RestrictEnum","enumValues","values","RangeError","indexOf","valueStr","JSON","stringify","RestrictNumberMax","max","closed","TypeError","RestrictNumberMin","min","RestrictNumberInt","strict","RestrictCustom","restrictFn","error","TypeBase","restricts","typeRestrict","requiredRestrict","currentRestrict","defaultConfig","enable","value","undefined","formatterConfig","formatter","errorForAllConfig","restrict","push","setErrorMessage","args","assign","calcDefaultValue","originalMessage","validate","getReturnValue","checkType","checkRequired","checkRestricts","errorForAll","getErrorForAll","NUMBER_REG","TypeNumber","isAllowString","RestrictNumberRequired","enableAllowNaN","enableAllowInfinity","RestrictStringType","RestrictLengthMax","RestrictLengthMin","RestrictStringPattern","pattern","TypeString","getReturnValueWithStrict","RestrictBooleanType","TypeBoolean","RestrictAnyType","TypeAny","RestrictAnyRequired","RestrictObjectType","TypeObject","config","isStripUnknown","isAllowUnknown","pureConfig","create","forEach","includes","obj","schema","hasKey","validateRecurse","keyChainStr","RestrictArrayType","TypeArray","itemSchema","boolean"],"mappings":"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"}