{"version":3,"file":"racoon.js","sources":["../lib/utils/is.js","../lib/utils/constants.js","../lib/utils/validate-error.js","../lib/restricts/base.js","../lib/restricts/number-type.js","../lib/restricts/number-required.js","../lib/restricts/enum.js","../lib/restricts/number-max.js","../lib/restricts/number-min.js","../lib/restricts/number-int.js","../lib/restricts/required.js","../lib/restricts/custom.js","../lib/type/base.js","../lib/type/number.js","../lib/restricts/string-type.js","../lib/restricts/length-max.js","../lib/restricts/length-min.js","../lib/restricts/string-pattern.js","../lib/type/string.js","../lib/restricts/boolean-type.js","../lib/type/boolean.js","../lib/restricts/any-type.js","../lib/restricts/any-required.js","../lib/type/any.js","../lib/restricts/object-type.js","../lib/type/object.js","../lib/restricts/array-type.js","../lib/type/arrary.js","../lib/index.js"],"sourcesContent":["export const toString = Object.prototype.toString;\n\nexport function getType(val) {\n  const str = toString.call(val);\n  return str.substring(8, str.length - 1);\n}\n\nexport function isUndefined(val) {\n  return getType(val) === 'Undefined';\n}\n\nexport function isNull(val) {\n  return val === null;\n}\n\nexport function isNaN(val) {\n  return val !== val;\n}\n\nexport function isNotRequired(val) {\n  return isUndefined(val) || isNull(val);\n}\n\nexport function isFalsy(val) {\n  return !val;\n}\n\nexport function isEmpty(val) {\n  const type = getType(val);\n  if (type === 'Object') {\n    return Object.keys(val).length === 0;\n  }\n  if (type === 'Array' || type === 'Arguments') {\n    return val.length === 0;\n  }\n  return isFalsy(val);\n}\n\nexport function isEmptyObject(val) {\n  if (getType(val) === 'Object') {\n    return Object.keys(val).length === 0;\n  }\n  return false;\n}\n\nexport function isEmptyArray(val) {\n  if (getType(val) === 'Array') {\n    return val.length === 0;\n  }\n  return false;\n}\n\nexport function isString(val) {\n  return typeof val === 'string';\n}\n\nexport function isNumber(val) {\n  return typeof val === 'number';\n}\n\nexport function isInt(val) {\n  if (isNumber(val) === false) {\n    return false;\n  }\n  return Math.floor(val) === val;\n}\n\nexport function isInfinity(val) {\n  return isNumber(val) && isNaN(val) === false && Number.isFinite(val) === false;\n}\n\nexport function isBoolean(val) {\n  return typeof val === 'boolean';\n}\n\nexport function isRegExp(val) {\n  return val instanceof RegExp;\n}\n\nexport function isObject(val) {\n  return getType(val) === 'Object';\n}\n\nexport function isArray(val) {\n  return Array.isArray(val);\n}\n\nexport function isFunction(val) {\n  return getType(val) === 'Function';\n}\n\nexport function getKeyStr(keyChain) {\n  const propReg = /^[_$a-z][_$a-z\\d]*$/i;\n  let result = '';\n  for (let i = 0; i < keyChain.length; i += 1) {\n    const { type, key } = keyChain[i];\n    if (type === 'prop' && propReg.test(key)) {\n      if (result) {\n        result += `.${key}`;\n      } else {\n        result += key;\n      }\n    } else if (type === 'prop') {\n      result += `['${key}']`;\n    } else if (type === 'index') {\n      result += `[${key}]`;\n    }\n  }\n  return result;\n}\n","export const TYPE = {\n  number: 'number',\n  string: 'string',\n  boolean: 'boolean',\n  object: 'object',\n  array: 'array',\n  any: 'any'\n};\n","export default class ValidateError extends Error {\n  get [Symbol.toStringTag]() {\n    return 'ValidateError';\n  }\n\n  toString() {\n    return `Validate${super.toString()}`;\n  }\n}\n","import { isFunction } from '../utils/is';\nimport ValidateError from '../utils/validate-error';\n\nexport default class RestrictBase {\n  errorConfig = {\n    message: '',\n    ctx: null\n  }\n\n  setErrorMessage(message, ctx) {\n    this.errorConfig = {\n      message,\n      ctx,\n    };\n  }\n\n  getError(originMessage) {\n    const { message, ctx } = this.errorConfig;\n    if (isFunction(message)) {\n      return new ValidateError(\n        message.call(ctx, originMessage)\n      );\n    }\n    return new ValidateError(message || originMessage);\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isNaN,\n  isNumber,\n  isUndefined,\n  isNull,\n  isInfinity\n} from '../utils/is';\n\nexport default class RestrictNumberType extends RestrictBase {\n  isAllowNaN = false;\n  isAllowInfinity = false;\n\n  enableAllowNaN() {\n    this.isAllowNaN = true;\n  }\n\n  enableAllowInfinity() {\n    this.isAllowInfinity = true;\n  }\n\n  validate(val) {\n    const { isAllowNaN, isAllowInfinity } = this;\n    if (isNaN(val) && isAllowNaN === false) {\n      throw this.getError('value is not allowed to be NaN');\n    }\n    if (isInfinity(val) && isAllowInfinity === false) {\n      throw this.getError('value is not allowed to be Infinity');\n    }\n    if (isNumber(val) || isUndefined(val) || isNull(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof number');\n  }\n}\n","import RestrictBase from './base';\nimport { isNaN, isNotRequired } from '../utils/is';\n\nexport default class RestrictRequired extends RestrictBase {\n  validate(val) {\n    if (isNotRequired(val)) {\n      throw this.getError('value is required and should not be undefined/null');\n    }\n    if (isNaN(val)) {\n      throw this.getError('value is required and should not be NaN');\n    }\n    return true;\n  }\n}\n","import RestrictBase from './base';\n\nexport default class RestrictEnum extends RestrictBase {\n  enumValues = null;\n\n  constructor(...values) {\n    super();\n    if (values.length === 0) {\n      throw new RangeError('enum arguments can not be empty');\n    }\n    this.enumValues = values;\n  }\n\n  get valueStr() {\n    return JSON.stringify(this.enumValues);\n  }\n\n  validate(val) {\n    if (this.enumValues.indexOf(val) > -1) {\n      return true;\n    }\n    throw this.getError(`value should be one of ${this.valueStr}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictNumberMax extends RestrictBase {\n  constructor(max, closed = true) {\n    super();\n    if (isNumber(max) === false) {\n      throw new TypeError('`max` should be typeof number');\n    }\n    this.max = max;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed === false) {\n      if (val < this.max) {\n        return true;\n      }\n      throw this.getError(`value should less than ${this.max}`);\n    }\n\n    if (val <= this.max) {\n      return true;\n    }\n    throw this.getError(`value should less than or equal ${this.max}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictNumberMin extends RestrictBase {\n  constructor(min, closed = true) {\n    super();\n    if (isNumber(min) === false) {\n      throw new TypeError('`min` should be a number');\n    }\n\n    this.min = min;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed === false) {\n      if (val > this.min) {\n        return true;\n      }\n      throw this.getError(`value should greater than ${this.min}`);\n    }\n\n    if (val >= this.min) {\n      return true;\n    }\n    throw this.getError(`value should greater than or equal ${this.min}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isInt } from '../utils/is';\n\nexport default class RestrictNumberInt extends RestrictBase {\n  validate(val) {\n    if (isInt(val)) {\n      return true;\n    }\n    throw this.getError('value should be an int');\n  }\n}\n","import RestrictBase from './base';\nimport { isEmpty, isNotRequired } from '../utils/is';\n\nexport default class RestrictRequired extends RestrictBase {\n  strict = false;\n\n  constructor(strict) {\n    super();\n    this.strict = strict === true;\n  }\n\n  validate(val) {\n    const { strict } = this;\n    if (strict === true) {\n      if (isEmpty(val)) {\n        throw this.getError('value is required and should not be empty');\n      }\n      return true;\n    }\n    if (isNotRequired(val)) {\n      throw this.getError('value is required and should not be undefined/null');\n    }\n    return true;\n  }\n}\n","import { isFunction } from '../utils/is';\nimport RestrictBase from './base';\n\nexport default class RestrictCustom extends RestrictBase {\n  constructor(restrictFn, ctx) {\n    super();\n    if (isFunction(restrictFn) === false) {\n      throw new TypeError('`custom` must receive a Function parameter');\n    }\n    this.restrictFn = restrictFn;\n    this.ctx = ctx;\n  }\n\n  validate(val) {\n    try {\n      this.restrictFn.call(this.ctx, val);\n    } catch (error) {\n      throw this.getError(error.message);\n    }\n    return true;\n  }\n}\n","import {\n  isEmpty,\n  isNotRequired,\n  isNaN\n} from '../utils/is';\nimport RestrictRequired from '../restricts/required';\nimport RestrictCustom from '../restricts/custom';\n\nexport default class TypeBase {\n  restricts = [];\n  typeRestrict = null;\n  requiredRestrict = null;\n  currentRestrict = null;\n  defaultConfig = {\n    enable: false,\n    strict: false,\n    value: undefined\n  };\n  formatterConfig = {\n    ctx: undefined,\n    formatter: val => val\n  };\n\n  required(strict = false) {\n    this.requiredRestrict = new RestrictRequired(strict);\n    this.currentRestrict = this.requiredRestrict;\n    return this;\n  }\n\n  custom(restrictFn, ctx) {\n    const restrict = new RestrictCustom(restrictFn, ctx);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  error(message, ctx) {\n    this.currentRestrict.setErrorMessage(message, ctx);\n    return this;\n  }\n\n  default(...args) {\n    if (args.length === 0) {\n      throw new Error('`default` args can not be empty');\n    }\n    const [value, strict, ctx] = args;\n    Object.assign(this.defaultConfig, {\n      enable: true,\n      strict: strict === true,\n      value,\n      ctx\n    });\n    return this;\n  }\n\n  format(formatter, ctx) {\n    if (typeof formatter !== 'function') {\n      throw new TypeError('`format` argument should be a function');\n    }\n    this.formatterConfig = {\n      ctx,\n      formatter\n    };\n    return this;\n  }\n\n  calcDefaultValue(val) {\n    const { value, ctx } = this.defaultConfig;\n    if (typeof value === 'function') {\n      return value.call(ctx, val);\n    }\n    return value;\n  }\n\n  getReturnValueWithStrict(val) {\n    const { enable, strict } = this.defaultConfig;\n    const { formatter, ctx } = this.formatterConfig;\n    if (enable && (isNotRequired(val) || isNaN(val))) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    if (enable && isEmpty(val) && strict) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    return formatter.call(ctx, val);\n  }\n\n  getReturnValue(val) {\n    const { formatter, ctx } = this.formatterConfig;\n    if (this.defaultConfig.enable && (isNotRequired(val) || isNaN(val))) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    return formatter.call(ctx, val);\n  }\n\n  checkType(val) {\n    return this.typeRestrict.validate(val);\n  }\n\n  checkRequired(val) {\n    if (!this.requiredRestrict) {\n      return true;\n    }\n\n    return this.requiredRestrict.validate(val);\n  }\n\n  checkRestricts(val) {\n    for (let i = 0; i < this.restricts.length; i += 1) {\n      this.restricts[i].validate(val);\n    }\n    return true;\n  }\n\n  validate(val) {\n    if (!this.requiredRestrict && isNotRequired(val)) {\n      return this.getReturnValue(val);\n    }\n    this.checkType(val);\n    this.checkRequired(val);\n    this.checkRestricts(val);\n\n    return this.getReturnValue(val);\n  }\n\n  validateSilent(val) {\n    try {\n      return {\n        value: this.validate(val)\n      };\n    } catch (error) {\n      return {\n        error,\n        value: val\n      };\n    }\n  }\n}\n","import {\n  isNaN,\n  isNotRequired\n} from '../utils/is';\nimport { TYPE } from '../utils/constants';\nimport RestrictNumberType from '../restricts/number-type';\nimport RestrictNumberRequired from '../restricts/number-required';\nimport RestrictEnum from '../restricts/enum';\nimport RestrictNumberMax from '../restricts/number-max';\nimport RestrictNumberMin from '../restricts/number-min';\nimport RestrictNumberInt from '../restricts/number-int';\nimport TypeBase from './base';\n\nexport default class TypeNumber extends TypeBase {\n  type = TYPE.number;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictNumberType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  getReturnValue(val) {\n    const { enable } = this.defaultConfig;\n    const { formatter, ctx } = this.formatterConfig;\n    if (\n      enable\n      && (isNotRequired(val) || isNaN(val))\n    ) {\n      return formatter.call(\n        ctx,\n        this.calcDefaultValue(val)\n      );\n    }\n    return formatter.call(ctx, val);\n  }\n\n  default(...args) {\n    if (args.length === 0) {\n      throw new Error('`default` args can not be empty');\n    }\n    const [value, ctx] = args;\n    Object.assign(this.defaultConfig, {\n      enable: true,\n      strict: false,\n      value,\n      ctx\n    });\n    return this;\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  required() {\n    this.requiredRestrict = new RestrictNumberRequired();\n    this.currentRestrict = this.requiredRestrict;\n    return this;\n  }\n\n  allowNaN() {\n    this.typeRestrict.enableAllowNaN();\n    return this;\n  }\n\n  allowInfinity() {\n    this.typeRestrict.enableAllowInfinity();\n    return this;\n  }\n\n  min(min, closed = true) {\n    const restrict = new RestrictNumberMin(min, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  max(max, closed = true) {\n    const restrict = new RestrictNumberMax(max, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  int() {\n    const restrict = new RestrictNumberInt();\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isString,\n  isNotRequired\n} from '../utils/is';\n\nexport default class RestrictStringType extends RestrictBase {\n  validate(val) {\n    if (isString(val) || isNotRequired(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof string');\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictLengthMax extends RestrictBase {\n  constructor(max, closed = true) {\n    super();\n    if (isNumber(max) === false) {\n      throw new TypeError('`max` should be typeof number');\n    }\n\n    this.max = max;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed) {\n      if (val.length <= this.max) {\n        return true;\n      }\n      throw this.getError(`value length should less than or equal ${this.max}`);\n    }\n    if (val.length < this.max) {\n      return true;\n    }\n    throw this.getError(`value length should less than ${this.max}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isNumber } from '../utils/is';\n\nexport default class RestrictLengthMin extends RestrictBase {\n  constructor(min, closed = true) {\n    super();\n    if (isNumber(min) === false) {\n      throw new TypeError('`min` should be a number');\n    }\n\n    this.min = min;\n    this.closed = closed !== false;\n  }\n\n  validate(val) {\n    if (this.closed) {\n      if (val.length >= this.min) {\n        return true;\n      }\n      throw this.getError(`value length should greater than or equal ${this.min}`);\n    }\n    if (val.length > this.min) {\n      return true;\n    }\n    throw this.getError(`value length should greater than ${this.min}`);\n  }\n}\n","import RestrictBase from './base';\nimport { isRegExp } from '../utils/is';\n\nexport default class RestrictStringPattern extends RestrictBase {\n  constructor(pattern) {\n    super();\n    if (isRegExp(pattern) === false) {\n      throw new TypeError('pattern should be a RegExp');\n    }\n    this.pattern = pattern;\n  }\n\n  validate(val) {\n    if (this.pattern.test(val)) {\n      return true;\n    }\n    throw this.getError(`value should match pattern ${this.pattern.toString()}`);\n  }\n}\n","import { TYPE } from '../utils/constants';\nimport RestrictStringType from '../restricts/string-type';\nimport RestrictEnum from '../restricts/enum';\nimport RestrictLengthMax from '../restricts/length-max';\nimport RestrictLengthMin from '../restricts/length-min';\nimport RestrictStringPattern from '../restricts/string-pattern';\nimport TypeBase from './base';\n\nexport default class TypeString extends TypeBase {\n  type = TYPE.string;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictStringType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  max(max, closed = true) {\n    const restrict = new RestrictLengthMax(max, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  min(min, closed = true) {\n    const restrict = new RestrictLengthMin(min, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  pattern(pattern) {\n    const restrict = new RestrictStringPattern(pattern);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isBoolean,\n  isNotRequired\n} from '../utils/is';\n\nexport default class RestrictBooleanType extends RestrictBase {\n  validate(val) {\n    if (isBoolean(val) || isNotRequired(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof boolean');\n  }\n}\n","import { TYPE } from '../utils/constants';\nimport RestrictBooleanType from '../restricts/boolean-type';\nimport RestrictEnum from '../restricts/enum';\nimport TypeBase from './base';\n\nexport default class TypeBoolean extends TypeBase {\n  type = TYPE;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictBooleanType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  default(...args) {\n    if (args.length === 0) {\n      throw new Error('`default` args can not be empty');\n    }\n    const [value, ctx] = args;\n    Object.assign(this.defaultConfig, {\n      enable: true,\n      strict: false,\n      value,\n      ctx\n    });\n    return this;\n  }\n}\n","import RestrictBase from './base';\n\nexport default class RestrictAnyType extends RestrictBase {\n  validate(val) {\n    return true;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isNaN,\n  isNotRequired,\n  isEmptyObject,\n  isEmptyArray\n} from '../utils/is';\n\nexport default class RestrictRequired extends RestrictBase {\n  strict = false;\n\n  constructor(strict) {\n    super();\n    this.strict = strict === true;\n  }\n\n  validate(val) {\n    const { strict } = this;\n    if (strict === true) {\n      if (\n        isNotRequired(val)\n        || val === ''\n        || isNaN(val)\n        || isEmptyObject(val)\n        || isEmptyArray(val)\n      ) {\n        throw this.getError('value is required and should not be empty');\n      }\n      return true;\n    }\n    if (isNotRequired(val) || isNaN(val)) {\n      throw this.getError('value is required and should not be undefined/null/NaN');\n    }\n    return true;\n  }\n}\n","import { TYPE } from '../utils/constants';\nimport RestrictAnyType from '../restricts/any-type';\nimport RestrictAnyRequired from '../restricts/any-required';\nimport RestrictEnum from '../restricts/enum';\nimport TypeBase from './base';\n\nexport default class TypeAny extends TypeBase {\n  type = TYPE.any;\n\n  constructor() {\n    super();\n    this.typeRestrict = new RestrictAnyType();\n    this.currentRestrict = this.typeRestrict;\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  required(strict = false) {\n    this.requiredRestrict = new RestrictAnyRequired(strict);\n    this.currentRestrict = this.requiredRestrict;\n    return this;\n  }\n\n  enum(...values) {\n    const restrict = new RestrictEnum(...values);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isObject,\n  isUndefined,\n  isNull\n} from '../utils/is';\n\nexport default class RestrictObjectType extends RestrictBase {\n  validate(val) {\n    if (isObject(val) || isUndefined(val) || isNull(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof object');\n  }\n}\n","import {\n  isObject,\n  isNotRequired,\n  getKeyStr,\n} from '../utils/is';\nimport { TYPE } from '../utils/constants';\nimport RestrictObjectType from '../restricts/object-type';\nimport ValidateError from '../utils/validate-error';\nimport TypeBase from './base';\n\nexport default class TypeObject extends TypeBase {\n  type = TYPE.object;\n  config = null;\n  isStripUnknown = false;\n  isAllowUnknown = false;\n\n  constructor(config) {\n    super();\n    this.typeRestrict = new RestrictObjectType();\n    this.currentRestrict = this.typeRestrict;\n    if (isObject(config)) {\n      const pureConfig = Object.create(null);\n      Object.keys(config).forEach(key => {\n        if (config[key] instanceof TypeBase) {\n          pureConfig[key] = config[key];\n        }\n      });\n      this.config = pureConfig;\n    }\n  }\n\n  get keys() {\n    return Object.keys(this.config);\n  }\n\n  hasKey(key) {\n    return this.keys.includes(key);\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  stripUnknown() {\n    this.isStripUnknown = true;\n    return this;\n  }\n\n  allowUnknown() {\n    this.isAllowUnknown = true;\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {Object} obj - object to validate\n   * @param {Array} [keyChain=[]] - object props chain\n   * @returns {Object} - result of validate\n   */\n  validateRecurse(obj, keyChain) {\n    keyChain = keyChain || [];\n\n    if (this.config === null) {\n      return obj;\n    }\n\n    const result = {};\n    let keys;\n    if (this.isStripUnknown === true) {\n      keys = this.keys;\n    } else {\n      keys = Object.keys(obj);\n    }\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      const schema = this.config[key];\n      if (this.hasKey(key) === false) {\n        if (this.isStripUnknown === true) {\n          continue;\n        }\n        if (this.isAllowUnknown === true) {\n          result[key] = obj[key];\n          continue;\n        }\n        throw new ValidateError(`the key \\`${key}\\` is not allowed`);\n      }\n\n      try {\n        if (schema.type === TYPE.object || schema.type === TYPE.array) {\n          result[key] = schema.validateRecurse(\n            obj[key],\n            [\n              ...keyChain,\n              {\n                key,\n                type: 'prop'\n              }\n            ]\n          );\n        } else {\n          result[key] = schema.validate(obj[key]);\n        }\n      } catch (error) {\n        if (error instanceof ValidateError) {\n          let keyChainStr = getKeyStr([...keyChain, { type: 'prop', key }]);\n          if (keyChainStr) {\n            keyChainStr = `\"${keyChainStr}\": `;\n          }\n          throw new Error(`${keyChainStr}${error.message}`);\n        } else {\n          throw error;\n        }\n      }\n    }\n    return result;\n  }\n\n  validate(obj) {\n    if (!this.requiredRestrict && isNotRequired(obj)) {\n      return this.getReturnValue(obj);\n    }\n    this.checkRequired(obj);\n    this.checkType(obj);\n    this.checkRestricts(obj);\n\n    return this.getReturnValue(\n      this.validateRecurse(obj)\n    );\n  }\n}\n","import RestrictBase from './base';\nimport {\n  isArray,\n  isUndefined,\n  isNull\n} from '../utils/is';\n\nexport default class RestrictArrayType extends RestrictBase {\n  validate(val) {\n    if (isArray(val) || isUndefined(val) || isNull(val)) {\n      return true;\n    }\n    throw this.getError('value should be typeof array');\n  }\n}\n","import {\n  isNotRequired,\n  getKeyStr,\n} from '../utils/is';\nimport ValidateError from '../utils/validate-error';\nimport { TYPE } from '../utils/constants';\nimport RestrictArrayType from '../restricts/array-type';\nimport RestrictLengthMin from '../restricts/length-min';\nimport RestrictLengthMax from '../restricts/length-max';\nimport TypeBase from './base';\n\nexport default class TypeArray extends TypeBase {\n  type = TYPE.array;\n  itemSchema = null;\n\n  constructor(itemSchema) {\n    super();\n    this.typeRestrict = new RestrictArrayType();\n    this.currentRestrict = this.typeRestrict;\n    if (itemSchema instanceof TypeBase) {\n      this.itemSchema = itemSchema;\n    }\n  }\n\n  getReturnValue(val) {\n    return this.getReturnValueWithStrict(val);\n  }\n\n  min(min, closed = true) {\n    const restrict = new RestrictLengthMin(min, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  max(max, closed = true) {\n    const restrict = new RestrictLengthMax(max, closed);\n    this.restricts.push(restrict);\n    this.currentRestrict = restrict;\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {Array} array - array to validate\n   * @param {Array} [keyChain=[]] - props key chain\n   * @returns {Array} - result of validate\n   */\n  validateRecurse(array, keyChain) {\n    keyChain = keyChain || [];\n    const { itemSchema } = this;\n\n    if (itemSchema) {\n      const result = [];\n      for (let i = 0; i < array.length; i += 1) {\n        try {\n          if (itemSchema.type === TYPE.array || itemSchema.type === TYPE.object) {\n            result.push(\n              itemSchema.validateRecurse(array[i], [...keyChain, { type: 'index', key: i }])\n            );\n          } else {\n            result.push(\n              itemSchema.validate(array[i])\n            );\n          }\n        } catch (error) {\n          if (error instanceof ValidateError) {\n            let keyChainStr = getKeyStr([...keyChain, { type: 'index', key: i }]);\n            if (keyChainStr) {\n              keyChainStr = `\"${keyChainStr}\": `;\n            }\n            throw new Error(`${keyChainStr}${error.message}`);\n          } else {\n            throw error;\n          }\n        }\n      }\n      return result;\n    }\n    return array;\n  }\n\n  validate(array) {\n    if (!this.requiredRestrict && isNotRequired(array)) {\n      return this.getReturnValue(array);\n    }\n    this.checkRequired(array);\n    this.checkType(array);\n    this.checkRestricts(array);\n\n    return this.getReturnValue(\n      this.validateRecurse(array)\n    );\n  }\n}\n","import {\n  TypeNumber,\n  TypeString,\n  TypeBoolean,\n  TypeAny,\n  TypeObject,\n  TypeArray\n} from './type';\n\nexport function number() {\n  return new TypeNumber();\n}\n\nexport function string() {\n  return new TypeString();\n}\n\nexport function boolean() {\n  return new TypeBoolean();\n}\n\nexport function any() {\n  return new TypeAny();\n}\n\nexport function object(config) {\n  return new TypeObject(config);\n}\n\nexport function array(itemSchema) {\n  return new TypeArray(itemSchema);\n}\n\nexport default {\n  number,\n  string,\n  boolean,\n  any,\n  object,\n  array\n};\n"],"names":["toString","Object","prototype","getType","val","str","call","substring","length","isUndefined","isNull","isNaN","isNotRequired","isFalsy","isEmpty","type","keys","isEmptyObject","isEmptyArray","isString","isNumber","isInt","Math","floor","isInfinity","Number","isFinite","isBoolean","isRegExp","RegExp","isObject","isArray","Array","isFunction","getKeyStr","keyChain","propReg","result","i","key","test","TYPE","number","string","object","array","any","ValidateError","Symbol","toStringTag","Error","RestrictBase","errorConfig","message","ctx","originMessage","RestrictNumberType","isAllowNaN","isAllowInfinity","getError","RestrictRequired","RestrictEnum","enumValues","values","RangeError","indexOf","valueStr","JSON","stringify","RestrictNumberMax","max","closed","TypeError","RestrictNumberMin","min","RestrictNumberInt","strict","RestrictCustom","restrictFn","error","TypeBase","restricts","typeRestrict","requiredRestrict","currentRestrict","defaultConfig","enable","value","undefined","formatterConfig","formatter","restrict","push","setErrorMessage","args","assign","calcDefaultValue","validate","getReturnValue","checkType","checkRequired","checkRestricts","TypeNumber","RestrictNumberRequired","enableAllowNaN","enableAllowInfinity","RestrictStringType","RestrictLengthMax","RestrictLengthMin","RestrictStringPattern","pattern","TypeString","getReturnValueWithStrict","RestrictBooleanType","TypeBoolean","RestrictAnyType","TypeAny","RestrictAnyRequired","RestrictObjectType","TypeObject","config","isStripUnknown","isAllowUnknown","pureConfig","create","forEach","includes","obj","schema","hasKey","validateRecurse","keyChainStr","RestrictArrayType","TypeArray","itemSchema","boolean"],"mappings":"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"}